\subsection{Introducción}





\subsection{Análisis de simulación en series cronológicas}


El cuadro \ref{tab:comparaciones} muestra los valores del MAE, MASE y RMSE para cada proceso estimado y, además, muestra el proceso de origen de las series cronológicas simuladas. Al aplicar la función `auto.arima()` y la sobreparametrización sobre una serie cronológica generada a partir de un $ARIMA(1,0,0)$, se obtienen los mismos resultados, y esto son ligeramente inferiores a los obtenidos mediante un $ARIMA(1,1,1)$. Al generar datos a partir de un $ARIMA(1,0,1)$ los mejores pronósticos se obtienen tanto con el `auto.arima()` como con la sobreparametrización, pues ambos son superiores a los obtenidos mediante un $ARIMA(1,1,1)$. Al ir incorporando términos en las series no estacionales, como es el caso de los datos simulados a partir de un $ARIMA(2,0,3)$, los mejores pronósticos se obtienen mediante el uso de la sobreparametrización, pues la magnitud de sus errores son siempre menores. 

Cuando se consideran series cronológicas estacionales, se presenta un comportamiento similar a lo previamente descrito. Al tener una baja cantidad de parámetros en los datos simulados de un proceso estacional $ARIMA(0,0,1)(0,1,1)_{12}$, la sobreparametrización iguala los resultados obtenidos mediante la función `auto.arima()`; y además, cuando se incorporan más parámetros al modelo generador de los dato como en el caso del $ARIMA(2,1,4)(3,0,3)_{12}$, la sobreparametrización logra captar de mejor manera el comportamiento de los datos, obteniendo así menores mediciones del error, es decir, los pronósticos se acercan más a los datos reales. 

```{r}
comparaciones %>% 
    mutate(original=ifelse(modelo=="original", proceso, NA),
           original=zoo::na.locf(original)) %>% 
    na.omit() %>% 
    select(original, modelo:RMSE) %>% 
    data.frame(row.names = NULL) %>%
    mutate(modelo=recode(modelo,
                         "autoarima"="auto.arima",
                         "sobreparametrizacion"="Sobreparametrización",
                         "arima_estandar"="ARIMA estándar")) %>% 
    # group_by(original) %>% 
    # mutate_at(vars(MAE, MASE, RMSE), function(x){
    #     cell_spec(x, "latex",align = "r", color=ifelse(x==min(x), "blue", "black"))
    # }) %>% 
    kbl(., "latex", booktabs=T,escape = F, align = "r", caption="\\label{tab:comparaciones}Medidas de rendimiento según método de estimación", col.names = c("Proceso original", "Método", "Proceso", "MAE", "MASE", "RMSE")) %>%
    kable_styling(latex_options = c("scale_down", "repeat_header", "hold_position"), full_width = T, font_size = 5) %>% 
    column_spec(1, width = "2.5cm") %>%
    collapse_rows(columns = 1:2) %>% 
    column_spec(2, width = "2.5cm")

#cell_spec(cs_dt$mpg, color = ifelse(cs_dt$mpg > 20, "red", "blue")
```

\subsection{Estimaciones en series cronológicas costarricenses reales}

```{r, eval=FALSE}
#En el campo demográfico, por ejemplo, las estadísticas vitales son sistematizadas y divulgadas año tras año, por tanto, revelan los cambios acontecidos durante este periodo. Esta información junto con la proveniente de los censos de población constituye la base para construir los diferentes índices, tasas y otros indicadores que revelan la situación demográfica del país, información de gran relevancia para la planificación nacional, regional y local en diversos campos. Uno de estos principales campos de acción es la salud pública, para la cual la tasa de mortalidad infantil se considera uno de los indicadores prioritarios dado que refleja no solo las condiciones de salud de la población infante, sino también los niveles de desarrollo del país, pues depende de la calidad de la atención de la salud, principalmente de la prenatal y perinatal, así como de las condiciones de saneamiento. Por tanto, su continuo monitoreo es fundamental para diseñar, implementar y evaluar políticas de salud pública orientadas a disminuir y erradicar aquellas que son prevenibles [@calidad_vitales].
```


\subsubsection{Tasa de mortalidad infantil interanual}



Tras tener un panorama más claro del comportamiento de la serie mediante el análisis descriptivo anterior, se modela la serie mediante la función `auto.arima()`, teniendo como mejor modelo un $ARIMA(2,1,0)(0,0,1)$; y utilizando la sobreparametrización se tiene como mejor modelo un $ARIMA(4,1,0)(4,1,0)$. El cuadro \ref{tab:tmiimedidas} muestra como el uso de la sobreparametrización ofrece pronósticos más cercanos al valor real, y aunque los pronósticos están lejos de ser perfectos, el método propuesto logra reproducir de mejor manera el comportamiento de los datos, tal y como se muestra en la figura \ref{fig:tmiiplotpronostico}

```{r}
resumen_resultados(TMII, fecha_inicio = '2012-03-01', fecha_fin = '2017-12-01')$medidas %>% 
  kbl(., "latex", booktabs=T, escape = F, align = "r", caption="\\label{tab:tmiimedidas}Medidas de rendimiento según método de estimación para la TMII", col.names = c("Método", "RMSE", "MAE", "MAPE")) %>%
    kable_styling(latex_options = c("scale_down", "repeat_header", "hold_position"), 
                  full_width = T#, font_size = 5
                  )
```

```{r tmiiplotpronostico, fig.cap="Pronósticos de la TMII según método de estimación"}
resumen_resultados(TMII, fecha_inicio = '2012-03-01', fecha_fin = '2017-12-01')$pronostico %>% 
  rename("Método"=Serie) %>% 
  #filter(Serie %in% c("Original", "Arima")) %>% 
  ggplot(., aes(x=fecha, y=valor, colour=Método))+
  geom_line(size = 0.8)+
  scale_color_manual(values=c("limegreen", "orangered1", "blue"))+
  #geom_ribbon(aes(x=fecha, ymin=LIred, ymax=LSred), fill="green", linetype=0, alpha=0.2)+
  theme_minimal() +
  theme(text = element_text(size=9),
        axis.text.x = element_text(angle=0, hjust=1)) +
  labs(caption="Fuente: UED-INEC",
       y="TMII (por cada 1000 nacimientos)",
       x="Año") +
  theme(plot.title = element_text(hjust = 0.5, face="plain"),
        plot.caption=element_text(hjust=0, vjust=0.5,
                                  margin=margin(t=1,10,10,10))) +
  scale_x_date(expand = c(0,0))+
  scale_y_continuous(expand=c(0, 0))
```

\subsubsection{Mortalidad por causa externa}



De manera similar a lo hecho para pronosticar la TMII, se ajusta un modelo utilizando la función `auto.arima()`, siendo el modelo sugerido un $ARIMA(1,1,1)$; mientras que la sobreparametrización propone como mejor modelo un $ARIMA(2,0,1)(0,1,1)_{12}$. El cuadro \ref{tab:externasmedidas} muestra las medidas de rendimiento obtenidas de los pronósticos realizados con cada método, los cuáles son mejores al utilizar la sobreparametrización; este hecho también se observa gráficamente mediante la figura \ref{fig:externasplotpronostico}

```{r}
resumen_resultados(EXTERNA, fecha_inicio="2014-06-01", fecha_fin="2017-12-01")$medidas %>% 
  kbl(., "latex", booktabs=T, escape = F, align = "r", caption="\\label{tab:externasmedidas}Medidas de rendimiento según método de estimación para la Mortalidad por causa externa", col.names = c("Método", "RMSE", "MAE", "MAPE")) %>%
    kable_styling(latex_options = c("scale_down", "repeat_header", "hold_position"), 
                  full_width = T#, font_size = 5
                  )
```

```{r externasplotpronostico, fig.cap="Pronósticos de la TMII según método de estimación"}
resumen_resultados(EXTERNA, fecha_inicio="2014-06-01", fecha_fin="2017-12-01")$pronostico %>% 
  rename("Método"=Serie) %>% 
  #filter(Serie %in% c("Original", "Arima")) %>% 
  ggplot(., aes(x=fecha, y=valor, colour=Método))+
  geom_line(size = 0.8)+
  scale_color_manual(values=c("limegreen", "orangered1", "blue"))+
  #geom_ribbon(aes(x=fecha, ymin=LIred, ymax=LSred), fill="green", linetype=0, alpha=0.2)+
  theme_minimal() +
  theme(text = element_text(size=9),
        axis.text.x = element_text(angle=0, hjust=1)) +
  labs(caption="Fuente: UED-INEC",
       y="Mortalidad por causa externa (por cada 1000 habitantes)",
       x="Año") +
  theme(plot.title = element_text(hjust = 0.5, face="plain"),
        plot.caption=element_text(hjust=0, vjust=0.5,
                                  margin=margin(t=1,10,10,10))) +
  scale_x_date(expand = c(0,0))+
  scale_y_continuous(expand=c(0, 0))
```

\subsubsection{Incentivos salariales del sector público}



Nuevamente, se ajustaron dos modelos ARIMA, el primero de ellos mediante la función `auto.arima()`, siendo el modelo sugerido un $ARIMA(0,0,1)(1,1,0)_{12}$;y el segudo modelo sugerido, utilizando la sobreparametrización, es un $ARIMA(2,1,0)(1,2,0)_{12}$. Tanto el cuadro \ref{tab:incentivosmedidas} como la figura \ref{fig:incentivosplotpronostico} muestran que nuevamente los pronósticos obtenidos son superiores utilizando la sobreparametrización.

```{r}
resumen_resultados(INCENTIVOS, fecha_inicio="2013-11-01", fecha_fin="2015-06-01")$medidas %>% 
  kbl(., "latex", booktabs=T, escape = F, align = "r", caption="\\label{tab:incentivosmedidas}Medidas de rendimiento según método de estimación para los incentivos salariales", col.names = c("Método", "RMSE", "MAE", "MAPE")) %>%
    kable_styling(latex_options = c("scale_down", "repeat_header", "hold_position"), 
                  full_width = T#, font_size = 5
                  )
```

```{r incentivosplotpronostico, fig.cap="Pronósticos de los incentivos salariales según método de estimación"}
resumen_resultados(INCENTIVOS, fecha_inicio="2013-11-01", fecha_fin="2015-06-01")$pronostico %>% 
  rename("Método"=Serie) %>% 
  ggplot(., aes(x=fecha, y=valor, colour=Método))+
  geom_line(size = 0.8)+
  scale_color_manual(values=c("limegreen", "orangered1", "blue"))+
  theme_minimal() +
  theme(text = element_text(size=9),
        axis.text.x = element_text(angle=0, hjust=1)) +
  labs(caption="Fuente: Contraloría General de la República de Costa Rica",
       y="Incentivos salariales",
       x="Año") +
  theme(plot.title = element_text(hjust = 0.5, face="plain"),
        plot.caption=element_text(hjust=0, vjust=0.5,
                                  margin=margin(t=1,10,10,10))) +
  scale_x_date(expand = c(0,0))+
  scale_y_continuous(expand=c(0, 0))
```

\subsubsection{Intereses y comisiones del sector público}



Por último, los modelos ajustados para pronosticar los intereses y comisiones del sector público con un $ARIMA(0,0,1)(0,1,0)_{12}$ para el caso de la función `auto.arima()`; y un $ARIMA(0,1,2)(0,1,0)_{12}$ En este caso, la sobreparametrización es superior en dos de las tres medidas de rendimiento tal y como muestra el cuadro \ref{tab:interesesmedidas}, mientras que la figura \ref{fig:interesesplotpronostico} muestra de manera gráfica los pronósticos obtenidos, que son bastante similares pues ambos modelos difieren solamente en un parámetro para la parte estacional.

```{r}
resumen_resultados(INTERESES, fecha_inicio="2016-08-01", fecha_fin="2018-06-01")$medidas %>% 
  kbl(., "latex", booktabs=T, escape = F, align = "r", caption="\\label{tab:interesesmedidas}Medidas de rendimiento según método de estimación para los intereses y comisiones del sector público", col.names = c("Método", "RMSE", "MAE", "MAPE")) %>%
    kable_styling(latex_options = c("scale_down", "repeat_header", "hold_position"), 
                  full_width = T#, font_size = 5
                  )
```

```{r interesesplotpronostico, fig.cap="Pronósticos de los intereses y comisiones del sector público según método de estimación"}
resumen_resultados(INTERESES, fecha_inicio="2016-08-01", fecha_fin="2018-06-01")$pronostico %>% 
  rename("Método"=Serie) %>% 
  ggplot(., aes(x=fecha, y=valor, colour=Método))+
  geom_line(size = 0.8)+
  scale_color_manual(values=c("limegreen", "orangered1", "blue"))+
  theme_minimal() +
  theme(text = element_text(size=9),
        axis.text.x = element_text(angle=0, hjust=1)) +
  labs(caption="Fuente: Contraloría General de la República de Costa Rica",
       y="Intereses y comisiones del sector público",
       x="Año") +
  theme(plot.title = element_text(hjust = 0.5, face="plain"),
        plot.caption=element_text(hjust=0, vjust=0.5,
                                  margin=margin(t=1,10,10,10))) +
  scale_x_date(expand = c(0,0))+
  scale_y_continuous(expand=c(0, 0))
```

